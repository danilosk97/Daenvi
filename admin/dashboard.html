<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard • Daenvi Admin</title>
  <link rel="stylesheet" href="assets/admin.css"/>
</head>
<body>
  <header class="top">
    <div class="container topgrid">
      <a class="brand" href="../index.html" target="_blank" rel="noopener">
        <span class="dot"></span>
        <span class="name">Daenvi</span>
        <span class="tag">Admin</span>
      </a>

      <div class="actions">
        <button class="btn ghost" id="btnPreview" type="button">Abrir loja</button>
        <button class="btn ghost" id="btnLogout" type="button">Sair</button>
      </div>
    </div>
  </header>

  <main class="container">

    <section class="hero">
      <div>
        <h1 style="margin:0;">Painel Daenvi</h1>
        <p class="muted" style="margin:6px 0 0;">Gerencie produtos e pedidos (tudo free, sem backend).</p>
      </div>

      <div class="hero-actions">
        <button class="btn primary" id="btnNew" type="button">+ Novo produto</button>
        <button class="btn ghost" id="btnImport" type="button">Importar JSON</button>
        <button class="btn ghost" id="btnExport" type="button">Exportar JSON</button>
        <button class="btn danger" id="btnReset" type="button">Resetar override</button>
      </div>
    </section>

    <div class="tabs">
      <button class="tab active" id="tabProdutos" type="button">Produtos</button>
      <button class="tab" id="tabPedidos" type="button">Pedidos</button>
    </div>

    <!-- PRODUTOS -->
    <div id="viewProdutos">
      <section class="grid">
        <div class="panel">
          <div class="panel-head">
            <div class="title">Lista</div>
            <input id="search" class="search" placeholder="Buscar por nome/categoria/ID..." />
          </div>
          <div id="list" class="list"></div>
        </div>

        <div class="panel">
          <div class="panel-head">
            <div class="title" id="formTitle">Novo produto</div>
            <div class="pill" id="pill">Criando</div>
          </div>

          <form id="productForm" class="form2">
            <div class="row2">
              <div class="field">
                <label>ID (único)</label>
                <input id="id" placeholder="Ex: p10" required />
              </div>
              <div class="field">
                <label>Categoria</label>
                <input id="categoria" placeholder="Ex: Eletrônicos" required />
              </div>
            </div>

            <div class="field">
              <label>Nome</label>
              <input id="nome" placeholder="Ex: Carregador Turbo 25W" required />
            </div>

            <div class="row2">
              <div class="field">
                <label>Preço (R$)</label>
                <input id="preco" inputmode="decimal" placeholder="Ex: 79,90" required />
              </div>
              <div class="field">
                <label>Link do fornecedor (opcional)</label>
                <input id="fornecedor" placeholder="https://..." />
              </div>
            </div>

            <div class="field">
              <label>Imagem (Upload)</label>

              <div class="img-uploader">
                <input id="imagemFile" type="file" accept="image/*" />
                <button class="btn ghost" type="button" id="btnRemoveImg">Remover</button>
              </div>

              <input id="imagem" type="hidden" required />

              <div class="img-preview" id="imgPreviewBox">
                <img id="imgPreview" alt="Preview" />
                <div class="img-preview-empty" id="imgPreviewEmpty">Sem imagem (faça upload)</div>
              </div>

              <small class="muted">A imagem será comprimida automaticamente e salva em base64.</small>
            </div>

            <div class="field">
              <label>Descrição</label>
              <textarea id="descricao" rows="5" placeholder="Descrição do produto..." required></textarea>
            </div>

            <div id="msg" class="msg"></div>

            <div class="form-actions">
              <button class="btn primary" type="submit" id="btnSave">Salvar</button>
              <button class="btn ghost" type="button" id="btnClear">Limpar</button>
              <button class="btn danger" type="button" id="btnDelete" disabled>Excluir</button>
            </div>
          </form>

          <div class="mini">
            <div class="mini-title">Como publicar</div>
            <ol class="muted">
              <li>Clique em <b>Exportar JSON</b></li>
              <li>Substitua <b>assets/data/produtos.json</b> pelo arquivo exportado</li>
              <li>Suba o site</li>
            </ol>
          </div>
        </div>
      </section>
    </div>

    <!-- PEDIDOS -->
    <div id="viewPedidos" style="display:none;">
      <section class="panel" style="margin-top:14px;">
        <div class="panel-head">
          <div class="title">Pedidos</div>
          <div class="muted" id="ordersCount">0 pedido(s)</div>
        </div>

        <div class="row-actions">
          <input id="ordersSearch" class="search" placeholder="Buscar por ID, nome, CPF, status..." />
          <select id="ordersFilter" class="search">
            <option value="todos">Todos</option>
            <option value="novo">NOVO</option>
            <option value="confirmado">CONFIRMADO</option>
            <option value="enviado">ENVIADO</option>
            <option value="entregue">ENTREGUE</option>
            <option value="cancelado">CANCELADO</option>
          </select>

          <button class="btn ghost" id="btnExportOrders" type="button">Exportar pedidos</button>
          <button class="btn danger" id="btnClearOrders" type="button">Apagar pedidos</button>
        </div>

        <div id="ordersList" class="orders-list"></div>
      </section>

      <div class="modal" id="orderModal" style="display:none;">
        <div class="modal-card">
          <div class="modal-top">
            <div class="title">Detalhes do pedido</div>
            <button class="btn ghost" id="orderModalClose" type="button">Fechar</button>
          </div>
          <div id="orderModalBody"></div>
        </div>
      </div>
    </div>

    <input id="fileInput" type="file" accept="application/json" hidden />

  </main>

  <script src="assets/admin-dashboard.js"></script>
</body>
</html>